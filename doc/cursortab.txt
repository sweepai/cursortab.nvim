*cursortab.txt*  AI-powered code completion for Neovim

Author: Leo
License: MIT

==============================================================================
CONTENTS                                                   *cursortab-contents*

  1. Introduction ..................................... |cursortab-introduction|
  2. Setup ............................................ |cursortab-setup|
  3. Configuration .................................... |cursortab-config|
  4. Commands ......................................... |cursortab-commands|
  5. Architecture ..................................... |cursortab-architecture|

==============================================================================
INTRODUCTION                                           *cursortab-introduction*

cursortab.nvim is an AI-powered code completion plugin with a hybrid Lua/Go
architecture. It provides intelligent code completions with support for
multi-stage edits and cursor prediction.

==============================================================================
SETUP                                                         *cursortab-setup*

Using lazy.nvim: >lua

  {
    "leonardcser/cursortab.nvim",
    build = "cd server && go build",
    config = function()
      require("cursortab").setup({
        -- your config here
      })
    end,
  }
<

==============================================================================
CONFIGURATION                                                *cursortab-config*

The configuration uses a nested structure for better organization and
maintainability.

Full configuration with defaults: >lua

  require("cursortab").setup({
    enabled = true,
    log_level = "info",  -- "trace", "debug", "info", "warn", "error"
    state_dir = vim.fn.stdpath("state") .. "/cursortab",  -- Directory for runtime files

    keymaps = {
      accept = "<Tab>",           -- Keymap to accept completion, or false to disable
      partial_accept = "<S-Tab>", -- Keymap to partially accept, or false to disable
    },

    ui = {
      colors = {
        deletion = "#4f2f2f",
        addition = "#394f2f",
        modification = "#282e38",
        completion = "#80899c",
      },
      jump = {
        symbol = "î‚²",
        text = " TAB ",
        show_distance = true,
        bg_color = "#373b45",
        fg_color = "#bac1d1",
      },
    },

    behavior = {
      idle_completion_delay = 50,   -- ms, -1 to disable
      text_change_debounce = 50,    -- ms
      max_visible_lines = 0,        -- max visible lines per completion, 0 to disable
      cursor_prediction = {
        enabled = true,
        auto_advance = true,
        proximity_threshold = 2,
      },
    },

    provider = {
      type = "inline",              -- "inline", "fim", "sweep", "sweepapi", "zeta"
      url = "http://localhost:8000",
      api_key_env = "",             -- Env var name for API key
      model = "",
      temperature = 0.0,
      max_tokens = 512,
      top_k = 50,
      completion_timeout = 5000,    -- ms
      max_diff_history_tokens = 512,
      completion_path = "/v1/completions",
      fim_tokens = {
        prefix = "<|fim_prefix|>",
        suffix = "<|fim_suffix|>",
        middle = "<|fim_middle|>",
      },
    },

    blink = {
      enabled = false,
      ghost_text = true,
    },

    debug = {
      immediate_shutdown = false,
    },
  })
<

KEYMAP OPTIONS                                      *cursortab-config-keymap*

keymaps.accept                                  *cursortab-config-keymaps-accept*

  The keymap to accept completions in insert/normal mode. Can be a keymap
  string (e.g., "<Tab>") or `false` to disable the built-in keymap entirely.
  Default: "<Tab>".
  Set to `false` when managing the accept keymap yourself (e.g., blink.cmp).

keymaps.partial_accept                  *cursortab-config-keymaps-partial-accept*

  The keymap to partially accept completions in insert mode. For inline
  completions (append_chars), accepts text up to the next word boundary
  (space or punctuation). For multi-line completions, accepts one line at
  a time. Can be a keymap string (e.g., "<S-Tab>") or `false` to disable.
  Default: "<S-Tab>".

------------------------------------------------------------------------------
UI OPTIONS                                                *cursortab-config-ui*

ui.colors                                          *cursortab-config-ui-colors*

  `deletion`      Background color for deleted text highlights.
  `addition`      Background color for added text highlights.
  `modification`  Background color for modified text highlights.
  `completion`    Foreground color for completion text.

ui.jump                                              *cursortab-config-ui-jump*

  `symbol`        Symbol shown before jump indicator (default: "").
  `text`          Text shown in jump indicator (default: " TAB ").
  `show_distance` Show line distance for off-screen jumps (default: true).
  `bg_color`      Background color for jump indicator.
  `fg_color`      Foreground color for jump indicator.

------------------------------------------------------------------------------
BEHAVIOR OPTIONS                                    *cursortab-config-behavior*

  `idle_completion_delay`
      Delay in milliseconds after being idle in normal mode before triggering
      completion. Set to -1 to disable idle completions.

  `text_change_debounce`
      Debounce in milliseconds after text changes before triggering completion.

  `max_visible_lines`
      Maximum visible lines per completion. When set to a positive value,
      completions will be split into stages if they exceed this line limit, in
      addition to the existing proximity threshold and viewport constraints.
      Set to 0 to disable (default: 0).

behavior.cursor_prediction            *cursortab-config-behavior-cursor-prediction*

  `enabled`
      Show jump indicators after completions (default: true).

  `auto_advance`
      When a completion results in no code changes, show a cursor jump to the
      last line of the completion (default: true).

  `proximity_threshold`
      Minimum lines apart to show a cursor jump between completions. When
      completions span multiple distant locations, this controls when to show
      a jump indicator instead of applying changes directly. Set to 0 to
      disable (default: 2).

------------------------------------------------------------------------------
PROVIDER OPTIONS                                    *cursortab-config-provider*

  `type`
      Provider type: "inline", "fim", "sweep", "sweepapi", or "zeta".
      - inline: End-of-line completion, stops at newline
      - fim: Fill-in-the-middle, multi-line with prefix/suffix context
      - sweep: SweepAI Next-Edit model for multi-line edits (local)
      - sweepapi: SweepAI hosted API (no local model required)
      - zeta: Zed's Zeta model with cursor predictions

  `url`
      URL of the provider server.

  `api_key_env`
      Environment variable name containing the API key for authenticated
      requests. The value is read from the environment at daemon startup.
      Example: "OPENAI_API_KEY" reads from $OPENAI_API_KEY. Leave empty
      for unauthenticated local servers.

  `model`
      Model name to use.

  `temperature`
      Sampling temperature for generation.

  `max_tokens`
      Maximum tokens to generate. For sweep/zeta providers, this also
      determines the input context size (trimmed to fit within output budget).

  `top_k`
      Top-k sampling parameter.

  `completion_timeout`
      Timeout in milliseconds for completion requests.

  `max_diff_history_tokens`
      Maximum tokens for diff history context. Set to 0 for no limit.

  `completion_path`
      API endpoint path for completions. Default: "/v1/completions".
      Must start with "/". Override when using non-standard API endpoints.

  `fim_tokens`                                 *cursortab-config-provider-fim*
      FIM (Fill-in-the-Middle) tokens configuration. Only used by the FIM
      provider. When nil, uses default tokens. Example: >lua

        fim_tokens = {
          prefix = "<|fim_prefix|>",   -- Token before prefix content
          suffix = "<|fim_suffix|>",   -- Token before suffix content
          middle = "<|fim_middle|>",   -- Token before completion
        }
<
  `privacy_mode`                         *cursortab-config-provider-privacy-mode*
      Don't send telemetry to provider. When enabled, providers that support
      this option will not send usage metrics. Default: true.

------------------------------------------------------------------------------
BLINK OPTIONS                                            *cursortab-config-blink*

  `blink.enabled`
      Enable the built-in blink.cmp source (default: false).

  `blink.ghost_text`
      Show native ghost text alongside blink menu (default: true).

------------------------------------------------------------------------------
DEBUG OPTIONS                                          *cursortab-config-debug*

  `immediate_shutdown`
      Shutdown daemon immediately when no clients are connected. Useful for
      development.

==============================================================================
COMMANDS                                                   *cursortab-commands*

:CursortabToggle                                            *:CursortabToggle*
    Toggle cursortab functionality on/off.

:CursortabStatus                                            *:CursortabStatus*
    Show daemon and connection status.

:CursortabShowLog                                          *:CursortabShowLog*
    Open the daemon log file in a scratch buffer.

:CursortabClearLog                                        *:CursortabClearLog*
    Clear the daemon log file.

:CursortabRestart                                          *:CursortabRestart*
    Stop and restart the daemon process.

==============================================================================
BLINK.CMP INTEGRATION                            *cursortab-blink-integration*

cursortab.nvim provides a minimal blink.cmp source that only consumes
append_chars (end-of-line ghost text). Complex diffs (multi-line edits,
replacements, deletions, cursor prediction UI) still render via the native UI.

Example: >lua

  require("cursortab").setup({
    keymaps = {
      accept = false,
    },
    blink = {
      enabled = true,
      ghost_text = false,
    },
  })

  require("blink.cmp").setup({
    sources = {
      providers = {
        cursortab = {
          module = "cursortab.blink",
          name = "cursortab",
          async = true,
          -- Should match provider.completion_timeout in cursortab config
          timeout_ms = 5000,
          score_offset = 50, -- Higher priority among suggestions
        },
      },
    },
  })
<

==============================================================================
ARCHITECTURE                                           *cursortab-architecture*

cursortab.nvim uses a hybrid Lua/Go architecture:

  Lua Plugin (lua/cursortab/)
      Handles UI rendering, keybindings, and Neovim event subscriptions.
      Communicates with the daemon via Neovim RPC.

  Go Daemon (server/)
      Runs as a separate process, communicating via Unix socket.
      Manages the completion state machine and AI provider calls.

Communication flow: >

  Neovim Events ---> Lua Plugin ---> RPC ---> Go Daemon ---> AI Provider
                          |                        |
                          +<-- UI Rendering <------+
                                              Completion Response
<

State machine: >

  Idle ---> PendingCompletion ---> HasCompletion ---> HasCursorTarget
<

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
